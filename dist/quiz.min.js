"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function e(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function r(e,t){var i=this,n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).animated,n=void 0===n||n;d(this,r),f(this,"selectClassName","select select__wrapper"),f(this,"selectButtonClassName","selectus__button"),f(this,"optionsBoxName","selectus__optionsBox"),f(this,"optionsClassName","selectus__option"),f(this,"optionsActiveClassName","".concat(this.optionsClassName,"_active")),f(this,"toggleSpeed",200),f(this,"hideMenu",function(){i.optionsBox.classList.add("selectus__optionsBox_animated"),i.menuHeight=i.optionsBox.getBoundingClientRect().height,i.optionsBox.style.height="0px"}),f(this,"toggleSelectMenu",function(){i.touched=!0,i.animated?i.optionsBox.classList.contains("".concat(i.optionsBoxName,"_opened"))?i.toggleMenu(i.toggleSpeed,"close"):i.toggleMenu(i.toggleSpeed,"open"):(i.optionsBox.classList.toggle("".concat(i.optionsBoxName,"_opened")),i.optionsBox.classList.contains("".concat(i.optionsBoxName,"_opened"))?window.addEventListener("click",i.closeMenu):window.removeEventListener("click",i.closeMenu))}),f(this,"closeMenu",function(e){e.target.closest(".select__wrapper")||(i.animated?i.toggleMenu(i.toggleSpeed,"close"):i.optionsBox.classList.remove("".concat(i.optionsBoxName,"_opened")),window.removeEventListener("click",i.closeMenu),i.checkError())}),f(this,"selectOption",function(e){var t,n,e=e.target.closest(".".concat(i.optionsClassName));e&&(t=e.dataset.value,n=e.dataset.index,e=e.innerText,i.resetOptions(),i.changeSelectData(n,t,e))}),this.defaultSelect=e,this.animated=n,this.order=t,this.init(),this.render()}return e(r,[{key:"init",value:function(){this.hide(this.defaultSelect),this.required=this.defaultSelect.required,this.name=this.defaultSelect.getAttribute("name"),this.touched=!1,this.valid=!1}},{key:"hide",value:function(e){e.style.display="none"}},{key:"toggleMenu",value:function(t,n){var i=this,r=("open"===n?window.addEventListener("click",this.closeMenu):window.removeEventListener("click",this.closeMenu),performance.now());requestAnimationFrame(function(e){return i.animationFunction({time:e,start:r,duration:t,type:n})})}},{key:"animationFunction",value:function(e){var t=this,n=e.time,i=e.start,r=e.duration,s=e.type,e=(n-i)/r,n=(1<=e&&(e=1,"open"===s?(this.optionsBox.classList.add("".concat(this.optionsBoxName,"_opened")),5*this.options[0].offsetHeight>this.menuHeight&&(this.menuHeight=5*this.options[0].offsetHeight,this.optionsBox.style.height="".concat(this.menuHeight,"px"))):this.optionsBox.classList.remove("".concat(this.optionsBoxName,"_opened"))),"open"===s?this.getOpenTiming(e):this.getCloseTiming(e));this.draw(n),e<1&&requestAnimationFrame(function(e){return t.animationFunction({time:e,start:i,duration:r,type:s})})}},{key:"getOpenTiming",value:function(e){return e}},{key:"getCloseTiming",value:function(e){return 1-e}},{key:"draw",value:function(e){this.optionsBox.style.height="".concat(this.menuHeight*e,"px")}},{key:"resetOptions",value:function(){this.options[this.index].classList.remove(this.optionsActiveClassName),this.defaultSelect.options[this.index].removeAttribute("selected")}},{key:"changeSelectData",value:function(e,t,n){this.value=t,this.index=e,0!=this.value?this.button.innerHTML="<span>".concat(n,"</span>"):this.button.innerHTML='<span class="input__placeholder">'.concat(n,"</span>"),this.options[this.index].classList.add(this.optionsActiveClassName),this.defaultSelect.options[this.index].setAttribute("selected","selected"),this.valid=0!=this.value,this.checkError(),this.defaultSelect.dispatchEvent(new Event("change"))}},{key:"checkError",value:function(){this.required&&this.touched&&(this.valid?(this.errorElement.classList.add("select__error_hidden"),this.elem.classList.remove("select_invalid")):(this.errorElement.classList.remove("select__error_hidden"),this.elem.classList.add("select_invalid")))}},{key:"showError",value:function(){this.touched=!0,this.checkError()}},{key:"render",value:function(){var s=this,e=(this.parent=this.defaultSelect.parentElement,this.value=this.defaultSelect.value,this.index=this.defaultSelect.selectedIndex,this.elem=document.createElement("div"),this.elem.className=this.selectClassName,this.elem.dataset.order=this.order,this.button=document.createElement("div"),this.button.classList.add(this.selectButtonClassName),this.button.innerHTML='<span class="input__placeholder">'.concat(this.defaultSelect[this.index].innerText,"</span>"),this.optionsBox=document.createElement("div"),this.optionsBox.classList.add(this.optionsBoxName),Array.from(this.defaultSelect.options));this.options=o(e).map(function(e,t){var n=e.value,i=e.innerText,e=e.selected,r=document.createElement("div");return r.innerHTML='\n          <div\n            class="'.concat(s.optionsClassName).concat(e?" ".concat(s.optionsActiveClassName):"",'"\n            data-value="').concat(n,'"\n            data-index="').concat(t,'"\n          >\n            ').concat(i,"           \n          </div>\n        "),r.firstElementChild}),this.options.forEach(function(e){return s.optionsBox.insertAdjacentElement("beforeend",e)}),this.parent.insertBefore(this.elem,this.defaultSelect),this.elem.insertAdjacentElement("beforeend",this.button),this.elem.insertAdjacentElement("beforeend",this.optionsBox),this.required&&(this.errorMessage=this.defaultSelect.dataset.error,this.errorElement=document.createElement("span"),this.errorElement.className="select__error select__error_hidden",this.errorElement.innerText=this.errorMessage,this.elem.insertAdjacentElement("afterend",this.errorElement)),this.addEventListeners()}},{key:"addEventListeners",value:function(){this.elem.addEventListener("click",this.toggleSelectMenu),this.optionsBox.addEventListener("click",this.selectOption),this.animated&&document.addEventListener("DOMContentLoaded",this.hideMenu)}},{key:"isValid",value:function(){return 0!=this.value}}]),r}(),l=(window.selectus=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.animated,i=void 0===n||n,n=t.parent,t=o((void 0===n?document:n).querySelectorAll(e)).map(function(e,t){return new u(e,t,{animated:i})});return t.reverse().forEach(function(e,t){var n=window.getComputedStyle(e.elem).zIndex;e.elem.style.zIndex=+n+t}),t.reverse()},function(){function n(e){var t=this;d(this,n),f(this,"setValue",function(e){t.value=e.target.value,t.element.value=t.value}),f(this,"onBlur",function(){t.touched=!0,t.validate()}),f(this,"validate",function(){t.valid=!t.data.required&&!t.data.check||t.isValid(),!t.valid&&t.touched?(t.errorElement.classList.remove("input__error_hidden"),t.element.classList.add("input__invalid")):(t.errorElement.classList.add("input__error_hidden"),t.element.classList.remove("input__invalid"))}),f(this,"showError",function(){t.onBlur()}),this.source=e,this.setProps(),this.render(),this.addEvents(),this.valid=!1,this.touched=!1}return e(n,[{key:"setProps",value:function(){if(this.data=h({},this.source.dataset),this.data.required=this.source.required,this.data.placeholder=this.source.getAttribute("placeholder"),this.data.name=this.source.getAttribute("name"),!this.data.name)throw new Error("Inputs must have a name property!");var e,t;"text"===this.data.type&&this.data.length&&(e=(t=s(this.data.length.split("-"),2))[0],t=t[1],this.data.min=+e||5,this.data.max=+t||null),"number"!==this.data.type&&"tel"!==this.data.type||(this.data.min=+this.data.min||null,this.data.max=+this.data.max||null),"tel"===this.data.type&&(this.data.min=+this.data.min||10)}},{key:"render",value:function(){var e=this.source.parentNode,t=document.createElement("div");t.className="input__wrapper",e.insertBefore(t,this.source),this.element=document.createElement("input"),this.element.className="input",this.element.setAttribute("placeholder",this.data.placeholder),this.errorElement=document.createElement("span"),this.errorElement.className="input__error input__error_hidden",this.errorElement.innerText=this.data.error,t.appendChild(this.element),t.appendChild(this.errorElement),this.source.remove(),delete this.source}},{key:"addEvents",value:function(){this.element.addEventListener("input",this.setValue),this.element.addEventListener("input",this.validate),this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("change",this.onBlur)}},{key:"isValid",value:function(){var e=this.value;if((this.data.required||this.data.check)&&!this.value)return!1;switch(this.data.type){case"text":if((e=e.trim()).length<this.data.min||this.data.max&&e.length>this.data.max)return!1;break;case"number":if(e=parseFloat(this.value),isNaN(e)||this.data.min&&e<this.data.min||this.data.max&&e>this.data.max)return!1;break;case"tel":if((e=e.trim().replace(/\D/g,"")).length<this.data.min||this.data.max&&e.length>this.data.max)return!1;break;case"email":if((e=e.trim()).match(/^((([0-9A-Za-z]{1}[-0-9A-z\.]{1,}[0-9A-Za-z]{1})|([0-9А-Яа-я]{1}[-0-9А-я\.]{1,}[0-9А-Яа-я]{1}))@([-A-Za-z]{1,}\.){1,2}[-A-Za-z]{2,})$/))break;return!1}return!0}}]),n}()),c=function(){function r(e,t,n){var i=this;d(this,r),f(this,"isValid",function(){return i.inputs.every(function(e){return!e.data.required||e.touched&&e.valid})&&i.selects.every(function(e){return!e.required||e.touched&&e.valid})}),this.element=e,this.inputs=t,this.selects=n}return e(r,[{key:"getValues",value:function(){var e=this.inputs.map(function(e){return f({},e.data.name,e.value)}).reduce(function(e,t){return h(h({},e),t)},{}),t=this.selects.map(function(e){return f({},e.name,e.value)}).reduce(function(e,t){return h(h({},e),t)},{});return h(h({},e),t)}},{key:"showErrors",value:function(){this.inputs.forEach(function(e){return e.showError()}),this.selects.forEach(function(e){return e.showError()})}}]),r}(),p=(window.validationForm=function(e){var t=createInputs(".validationInput",e),n=selectus(".validationSelect",{parent:e});return new c(e,t,n)},window.createInputs=function(e,t){return o(t.querySelectorAll(e)).map(function(e){return new l(e)})},window.createInput=function(e){e=document.querySelector(e);return new l(e)},function(){function c(e,t){var o=this,n=t.progress,n=void 0===n||n,i=t.start,i=void 0===i?1:i,r=t.showControls,r=void 0===r||r,s=t.immidiateChoice,s=void 0!==s&&s,a=t.speed,a=void 0===a?350:a,u=t.onFinish,u=void 0===u?function(){}:u,l=t.customs,l=void 0===l?[]:l,t=t.answers,t=void 0===t?[]:t;d(this,c),f(this,"onSlideClick",function(e){if(e.target.closest(".quiz__answer")&&(r=+(i=e.target.closest(".quiz__answer")).dataset.index,t=+(n=i.closest(".quiz__slide")).dataset.slide,o.slide(t).multiple?(i.classList.toggle("quiz__answer_choosen"),(t=o.result[o.active]||{})[r]=!t||(!t[r]||!t[r]),o.result[o.active]=h(h({},o.result[o.active]),t)):(o.clearChoice(n),i.classList.add("quiz__answer_choosen"),o.result[o.active]=r,o.immidiateChoice&&o.goToSlide(o.active+1))),e.target.closest(".quiz__button_next")){var t=o.result[o.active],n=o.slide(o.active),i=n.required,r=n.multiple,s=n.forms;if(i){if(s)o.isFormsValid(n)?o.goToSlide(o.active+1):o.showFormsErrors(n);else if(i){if(r&&o.isMultipleChoosen(t))return void o.goToSlide(o.active+1);!r&&t&&o.goToSlide(o.active+1)}}else o.goToSlide(o.active+1)}else e.target.closest(".quiz__button_previos")&&o.goToSlide(o.active-1),e.target.closest(".quiz__button_finish")&&("points"===o.testType&&o.checkPoints(),o.storeResults(),o.callback(h(h({},o.result),{},{formData:o.getFormData()})))}),this.element=document.querySelector(e),this.progress=n,this.active=i,this.answers=t,this.showControls=r,this.progress=n,this.immidiateChoice=s,this.speed=a,this.points=0,this.result={},this.callback=u,this.customs=l,this.testType=0<t.length?"points":"free",this.render(),this.initForms(),this.addEvents()}return e(c,[{key:"render",value:function(){this.slides=o(this.element.querySelectorAll(".quiz__slide")).map(function(e){return{element:e,required:"0"!==e.dataset.points,multiple:Boolean(e.dataset.multiple),name:e.dataset.name}}),this.length=this.slides.length,"points"===this.testType&&this.checkAnswers(),this.setProps(),this.showControls&&this.renderButtons(),this.progress&&this.renderProgress(),this.show(this.active)}},{key:"renderButtons",value:function(){var r=this,s=document.querySelector("#quizControlButtons");this.slides.forEach(function(e){var t=s.content.cloneNode(!0),n=t.querySelector(".quiz__button_previos"),i=t.querySelector(".quiz__button_next");e.element.appendChild(t),1===r.index(e)&&n.remove(),r.index(e)===r.length&&(i.remove(),t=document.querySelector("#quizFinishButton").content.cloneNode(!0),e.element.querySelector(".quiz__buttonsWrapper").appendChild(t))})}},{key:"initForms",value:function(){this.slides.forEach(this.initForm)}},{key:"initForm",value:function(e){var t=o(e.element.querySelectorAll(".quiz__form"));0<t.length&&(e.forms=t.map(function(e){return validationForm(e)}))}},{key:"renderProgress",value:function(){var e=document.querySelector("#quizProgress").content.cloneNode(!0);this.element.insertBefore(e,this.element.querySelector(".quiz__content")),this.pagination={current:this.element.querySelector(".quiz__progress_current"),total:this.element.querySelector(".quiz__progress_total")},this.progressBar=this.element.querySelector(".quiz__progress_in"),this.progress&&this.drawProgress(this.active)}},{key:"drawProgress",value:function(e){this.pagination.current.innerText=e,this.pagination.total.innerText=this.length,this.progressBar.style.width="".concat((100*e/this.length).toFixed(2),"%")}},{key:"show",value:function(e){this.slide(e).element.classList.add("quiz__slide_active")}},{key:"setProps",value:function(){this.slides.forEach(function(e,t){e.element.dataset.slide=t+1,e.answers=o(e.element.querySelectorAll(".quiz__answer")),e.answers.forEach(function(e,t){return e.dataset.index=t+1})})}},{key:"slide",value:function(t){return this.slides.find(function(e){return+e.element.dataset.slide===t})}},{key:"index",value:function(e){return+e.element.dataset.slide}},{key:"addEvents",value:function(){this.element.addEventListener("click",this.onSlideClick),this.addCustomEvents()}},{key:"addCustomEvents",value:function(){var t=this;this.customs.forEach(function(e){t.slide(e.slide)&&e.next&&t.slide(e.slide).element.querySelector(".quiz__button_next").addEventListener("click",function(){return e.next(t.slide(e.slide))})})}},{key:"showFormsErrors",value:function(e){e.forms.forEach(function(e){return e.showErrors()})}},{key:"isFormsValid",value:function(e){return e.forms.every(function(e){return e.isValid()})}},{key:"isMultipleChoosen",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).some(function(e){return t[e]})}},{key:"goToSlide",value:function(e){var t=this;e<=0||e>this.length||(this.slide(this.active).element.classList.add("hidding"),this.slide(e).element.classList.add("showing"),this.progress&&this.drawProgress(e),setTimeout(function(){t.slide(t.active).element.classList.remove("quiz__slide_active"),t.slide(t.active).element.classList.remove("hidding"),t.active=e,t.slide(t.active).element.classList.add("quiz__slide_active"),t.slide(t.active).element.classList.remove("showing")},this.speed))}},{key:"clearChoice",value:function(e){e=e.querySelector(".quiz__answer_choosen");e&&e.classList.remove("quiz__answer_choosen")}},{key:"checkAnswers",value:function(){if(!Array.isArray(this.answers))throw new Error("Answers must be an array type!");if(this.slides.length!==this.answers.length)throw new Error("Length of slides must be equal to questions's length")}},{key:"showAnswers",value:function(){var r=this;this.answers.forEach(function(t,e){var n,i;!r.slides[e].required||r.slides[e].multiple||r.slides[e].forms||(n=r.slides[e].answers.find(function(e){return+e.dataset.index===t}),i=r.slides[e].element.querySelector(".quiz__question"),console.log("".concat(e+1,". ").concat(i.textContent)),console.log("".concat(n.textContent)))})}},{key:"checkPoints",value:function(){var i=this;this.points=o(this.answers).reduce(function(e,t,n){return i.result[n+1]&&i.result[n+1]===t&&(e+=1),e},0)}},{key:"getFormData",value:function(){return this.slides.map(function(e){return e.forms?e.forms.map(function(e){return e.getValues()}).reduce(function(e,t){return h(h({},e),t)},{}):null}).filter(function(e){return null!=e}).reduce(function(e,t){return h(h({},e),t)},{})}},{key:"storeResults",value:function(){var r=this,e=Object.entries(this.result).map(function(e){var t,e=s(e,2),n=e[0],i=e[1],e=r.slide(+n),n={name:e.name,question:e.element.querySelector(".quiz__question").textContent};return"number"==typeof i?(t=e.answers.find(function(e){return+e.dataset.index===i}),n.choice=t.textContent):(t=e.answers.filter(function(e){return e.classList.contains("quiz__answer_choosen")}),n.choice=t.map(function(e){return e.textContent})),n}).reduce(function(e,t){return h(h({},e),{},f({},t.name,{question:t.question,choice:t.choice}))},{}),t=(e.testType=this.testType,"points"===e.testType&&(t=this.answers.filter(function(e){return"number"==typeof e}).length,e.stats={points:this.points,percent:(100*this.points/t).toFixed(2),total:t}),e.formsData=this.getFormData(),JSON.stringify(e));localStorage.setItem("quizResult",t)}}]),c}());window.buildQuiz=function(e){return new p(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})},function(){function n(e){return u[t]=i.apply(a,e),t++}function i(e){var t=[].slice.call(arguments,1);return function(){"function"==typeof e?e.apply(a,t):new Function(""+e)()}}function r(e){if(l)setTimeout(i(r,e),0);else{var t=u[e];if(t){l=!0;try{t()}finally{s(e),l=!1}}}}function s(e){delete u[e]}function N(){function e(e){e.source===o&&"string"==typeof e.data&&0===e.data.indexOf(t)&&r(+e.data.slice(t.length))}var t="setImmediate$"+Math.random()+"$";o.addEventListener?o.addEventListener("message",e,!1):o.attachEvent("onmessage",e),h=function(){var e=n(arguments);return o.postMessage(t+e,"*"),e}}var o,a,t,u,l,c,h,d,f,e,p,m,v,y,g,w,_,b,E,x,q,S,k;function T(e){this[g]=e}function L(e){return e instanceof T}function B(e){return"function"==typeof e}function A(e){return e instanceof z}function O(e){return e}function F(e){throw e}function C(e){delete e[v],delete e[y]}function M(e){for(var t=e.length,n=0;n<t;n++)e[n]()}function I(e,t,n){var i=P(n);A(i)?i.then(e,t):L(i)?t(i[g]):e(n)}function P(n){var i,e;if(A(n))return n;if(e=n,Object(e)===e){try{i=n.then}catch(e){return new T(e)}if(B(i))return new z(function(e,t){S(function(){try{i.call(n,e,t)}catch(e){t(e)}})})}return null}function D(t,e){function n(e){t[p]==w&&!function t(n,e){var i=P(e);A(i)?(n[p]=_,i.then(function(e){t(n,e)},function(e){j(n,e)})):L(i)?j(n,i[g]):(n[p]=b,n[m]=e,(i=n[v])&&i.length&&(C(n),M(i)))}(t,e)}function i(e){t[p]==w&&j(t,e)}try{e(n,i)}catch(e){i(e)}}function j(e,t){var n=e[y];e[p]=E,e[m]=t,n&&n.length&&(C(e),M(n))}function z(e){if(!A(this))throw new TypeError(q);this[p]=w,this[m]=void 0,D(this,e)}!function(){var o,t,i;function r(e){if("string"!=typeof e&&(e=e.toString()),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return e="string"!=typeof e?e.toString():e}function a(t){this.map={};var n=this;t instanceof a?t.forEach(function(t,e){e.forEach(function(e){n.append(t,e)})}):t&&Object.getOwnPropertyNames(t).forEach(function(e){n.append(e,t[e])})}function n(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function e(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if("string"==typeof(this._bodyInit=e))this._bodyText=e;else if(o&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else{if(e)throw new Error("unsupported BodyInit type");this._bodyText=""}},o?(this.blob=function(){var e=n(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(e)},this.text=function(){var e,t=n(this);if(t)return t;if(this._bodyBlob)return t=this._bodyBlob,(e=new FileReader).readAsText(t),u(e);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=n(this);return e||Promise.resolve(this._bodyText)},t&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e,t){var n;if(t=t||{},this.url=e,this.credentials=t.credentials||"omit",this.headers=new a(t.headers),this.method=(e=t.method||"GET",n=e.toUpperCase(),-1<i.indexOf(n)?n:e),this.mode=t.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&t.body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(t.body)}function h(e){var n=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(t=(e=e.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function d(e,t){t=t||{},this._initBody(e),this.type="default",this.url=null,this.status=t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof a?t.headers:new a(t.headers),this.url=t.url||""}self.fetch||(a.prototype.append=function(e,t){e=r(e),t=s(t);var n=this.map[e];n||(this.map[e]=n=[]),n.push(t)},a.prototype.delete=function(e){delete this.map[r(e)]},a.prototype.get=function(e){e=this.map[r(e)];return e?e[0]:null},a.prototype.getAll=function(e){return this.map[r(e)]||[]},a.prototype.has=function(e){return this.map.hasOwnProperty(r(e))},a.prototype.set=function(e,t){this.map[r(e)]=[s(t)]},a.prototype.forEach=function(t){var n=this;Object.getOwnPropertyNames(this.map).forEach(function(e){t(e,n.map[e])})},o="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),t="FormData"in self,i=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],l.call(c.prototype),l.call(d.prototype),self.Headers=a,self.Request=c,self.Response=d,self.fetch=function(e,t){var n=c.prototype.isPrototypeOf(e)&&!t?e:new c(e,t);return new Promise(function(i,r){var s=new XMLHttpRequest;"cors"===n.credentials&&(s.withCredentials=!0),s.onload=function(){var n,e,t=1223===s.status?204:s.status;t<100||599<t?r(new TypeError("Network request failed")):(t={status:t,statusText:s.statusText,headers:(t=s,n=new a,t.getAllResponseHeaders().trim().split("\n").forEach(function(e){var e=e.trim().split(":"),t=e.shift().trim(),e=e.join(":").trim();n.append(t,e)}),n),url:"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0},e="response"in s?s.response:s.responseText,i(new d(e,t)))},s.onerror=function(){r(new TypeError("Network request failed"))},s.open(n.method,n.url,!0),"responseType"in s&&o&&(s.responseType="blob"),n.headers.forEach(function(t,e){e.forEach(function(e){s.setRequestHeader(t,e)})}),s.send(void 0===n._bodyInit?null:n._bodyInit)})},self.fetch.polyfill=!0)}(),(o=new Function("return this")()).setImmediate||(t=1,l=!(u={}),c=o.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(o))&&e.setTimeout?e:o,"[object process]"==={}.toString.call(o.process)?h=function(){var e=n(arguments);return process.nextTick(i(r,e)),e}:!function(){var e,t;if(o.postMessage&&!o.importScripts)return e=!0,t=o.onmessage,o.onmessage=function(){e=!1},o.postMessage("","*"),o.onmessage=t,e}()?h=o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(e){r(e.data)},function(){var e=n(arguments);return f.port2.postMessage(e),e}):c&&"onreadystatechange"in c.createElement("script")?(d=c.documentElement,function(){var e=n(arguments),t=c.createElement("script");return t.onreadystatechange=function(){r(e),t.onreadystatechange=null,d.removeChild(t),t=null},d.appendChild(t),e}):function(){var e=n(arguments);return setTimeout(i(r,e),0),e}:N(),e.setImmediate=h,e.clearImmediate=s),p="[[PromiseStatus]]",m="[[PromiseValue]]",v="[[OnFulfilled]]",y="[[OnRejected]]",g="[[OriginalError]]",w="pending",_="internal pending",b="fulfilled",E="rejected",x="not an array.",q='constructor Promise requires "new".',S=(e=this).setImmediate||require("timers").setImmediate,k=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},z.prototype.then=function(u,l){var c,h=this;return u=B(u)?u:O,l=B(l)?l:F,c=new z(function(n,i){function e(e){var t;try{t=e(h[m])}catch(e){return void i(e)}t===c?i(new TypeError("then() cannot return same Promise that it resolves.")):I(n,i,t)}function t(){S(e,u)}function r(){S(e,l)}switch(h[p]){case b:t();break;case E:r();break;default:o=t,a=r,(s=h)[v]||(s[v]=[],s[y]=[]),s[v].push(o),s[y].push(a)}var s,o,a})},z.prototype.catch=function(e){return this.then(O,e)},z.resolve=function(n){var i=P(n);return A(i)?i:new z(function(e,t){L(i)?t(i[g]):e(n)})},z.reject=function(n){return new z(function(e,t){t(n)})},z.race=function(r){return new z(function(e,t){var n,i;if(k(r))for(i=r.length,n=0;n<i;n++)I(e,t,r[n]);else t(new TypeError(x))})},z.all=function(u){return new z(function(n,e){var t,i,r,s,o=0,a=0;if(k(u)){for(i=(u=u.slice(0)).length,s=0;s<i;s++)A(t=P(r=u[s]))?(a++,t.then(function(t){return function(e){u[t]=e,++o==a&&n(u)}}(s),e)):L(t)?e(t[g]):u[s]=r;a||n(u)}else e(new TypeError(x))})},"undefined"!=typeof module&&module.exports?module.exports=e.Promise||z:e.Promise||(e.Promise=z)}.call("object"===("undefined"==typeof window?"undefined":t(window))&&window||"object"===("undefined"==typeof self?"undefined":t(self))&&self||"object"===("undefined"==typeof global?"undefined":t(global))&&global||{});